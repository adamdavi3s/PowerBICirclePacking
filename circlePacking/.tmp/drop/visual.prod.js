function loadcirclepacking(t,e,n,i){function r(t){function e(t){return n.filter(function(e){return e.parent===t}).map(function(t){var n="";return 1==u&&(n=" ("+parseInt(t.size).toLocaleString()+")"),{name:t.name+""+n,size:t.size,children:e(t.name)}})}var n=t.map(function(t){return{name:t[0].name,parent:t[1].parent,size:t[2].size}});return e("-")[0]}function a(t){b=t;var e=d3.transition().duration(d3.event.altKey?7500:750).tween("zoom",function(t){var e=d3.interpolateZoom(_,[b.x,b.y,2*b.r+w]);return function(t){l(e(t))}});e.selectAll("text").filter(function(t){return t.parent===b||"inline"===this.style.display}).style("fill-opacity",function(t){return t.parent===b?1:0}).each("start",function(t){t.parent===b&&(this.style.display="inline")}).each("end",function(t){t.parent!==b&&(this.style.display="none")})}function l(t){var e=m/t[2];_=t,d.attr("transform",function(n){return"translate("+(n.x-t[0])*e+","+(n.y-t[1])*e+")"}),C.attr("r",function(t){return t.r*e})}for(var o=[],s=[],c="",u=!1,p=0;p<e.length;p++){var f=e[p],d=[{name:f[1]},{parent:f[0]},{size:f[2]}];o.push(d),s.push(f[0])}var h=s.filter(function(t,e,n){return e==n.indexOf(t)});if(0==h.length)o.push([{name:h[0]},{parent:"-"},{size:1}]);else if(c)for(var v=0;v<h.length;v++)h[v]==c&&o.push([{name:h[v]},{parent:"-"},{size:1}]);var _,y=r(o),g=y,m=Math.min(n,i),w=m/30,E=d3.scale.linear().domain([-1,5]).range(["hsl(152,80%,80%)","hsl(228,30%,40%)"]).interpolate(d3.interpolateHcl),A=d3.layout.pack().padding(2).size([m-w,m-w]).value(function(t){return t.size}),x=t.append("svg").attr("width",m).attr("height",m).append("g").attr("transform","translate("+m/2+","+m/2+")"),b=g,z=A.nodes(g),C=x.selectAll("circle").data(z).enter().append("circle").attr("class",function(t){return t.parent?t.children?"node":"node node--leaf":"node node--root"}).style("fill",function(t){return t.children?E(t.depth):null}).on("click",function(t){b!==t&&(a(t),d3.event.stopPropagation())}),d=(x.selectAll("text").data(z).enter().append("text").attr("class","label").style("fill-opacity",function(t){return t.parent===g?1:0}).style("display",function(t){return t.parent===g?"inline":"none"}).text(function(t){return t.name}),x.selectAll("circle,text"));d3.select("body").style("maincircle",E(-1)).on("click",function(){a(g)}),l([g.x,g.y,2*g.r+w]),d3.select(self.frameElement).style("height",m+"px")}var powerbi;!function(t){var e;!function(t){var e;!function(t){var e;!function(t){var e=function(){function t(t){this.target=t.element;this.svg=d3.select(t.element).append("svg").classed("circlepacking",!0)}return t.prototype.update=function(t){this.svg.attr({height:t.viewport.height,width:t.viewport.width});var e=t.viewport.height,n=t.viewport.width,i=t.dataViews[0].table.rows;this.chart?this.chart.update(i):this.chart=loadcirclepacking(this.svg,i,n,e)},t.prototype.destroy=function(){},t}();t.Visual=e}(e=t.PBI_CV_E43E8323_3100_4A3A_801E_B6C712747636||(t.PBI_CV_E43E8323_3100_4A3A_801E_B6C712747636={}))}(e=t.visual||(t.visual={}))}(e=t.extensibility||(t.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(t){var e;!function(e){var n;!function(e){e.PBI_CV_E43E8323_3100_4A3A_801E_B6C712747636={name:"PBI_CV_E43E8323_3100_4A3A_801E_B6C712747636",displayName:"CirclePacking",class:"Visual",version:"1.0.0",apiVersion:"1.1.0",create:function(e){return new t.extensibility.visual.PBI_CV_E43E8323_3100_4A3A_801E_B6C712747636.Visual(e)},custom:!0}}(n=e.plugins||(e.plugins={}))}(e=t.visuals||(t.visuals={}))}(powerbi||(powerbi={}));